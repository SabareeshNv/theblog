---
import { getCollection } from "astro:content";
import { filterPosts, generateTagData } from "../utils/helpers";

const allPosts = await getCollection("blog");
const filteredPosts = filterPosts(allPosts);

const uniqueTags = [
  ...new Set(filteredPosts.map((post) => post.data.tags).flat()),
] as string[];

const tagData = generateTagData(uniqueTags);
---

<section>
  <div class="heading">Topics</div>
  <div class="flex-row">
    {tagData.map((tag) => <a href={`/tag/${tag.slug}`}>{tag.name}</a>)}
  </div>
</section>

<style>
  .heading {
    margin-block-end: 0.5em;
    font-family: "Alegreya", ui-serif, serif;
    font-size: var(--fs-6);
    font-weight: 600;
  }

  div {
    gap: 0.5em;
  }

  a {
    background-color: #f5f5f4;
    padding: 0.5em;
    font-size: var(--fs-3);
    border-radius: 0.25rem;

    &:hover {
      background-color: #d4d4d3ff;
    }
  }
</style>
